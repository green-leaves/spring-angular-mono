function httpInterceptor(t){function e(e){return e.headers["auth-token"]=t.get("token"),e}var n={request:e};return n}function AppController(t,e,n,r){function o(){r.then(function(e){console.log(e),t.username=e.username})}function a(){e.remove("token"),console.log(n.location),n.location.href=n.location.pathname+"login.html"}t.logOut=a,o()}function HomeController(t,e){console.log("Home Controller")}function ChartController(t){function e(t){var e=t.split("-");return e[0]}function n(t){var n=e(t),r=!1;return n%5==0&&h.indexOf(n)==-1&&(h.push(n),r=!0),r}t.log=function(){console.log(l);var t=d3.scaleBand().rangeRound([0,l]);t.domain([100,999]),console.log(t(10))};var r="https://raw.githubusercontent.com/FreeCodeCamp/ProjectReferenceData/master/GDP-data.json",o=d3.select("svg").attr("width",1200).attr("height",500),a={top:20,right:20,bottom:30,left:40},l=+o.attr("width")-a.left-a.right,c=+o.attr("height")-a.top-a.bottom,i=d3.scaleBand().rangeRound([0,l]).padding(10),u=d3.scaleLinear().rangeRound([c,0]),s=o.append("g").attr("transform","translate("+a.left+","+a.top+")");d3.json(r,function(t){var r=t.data;i.domain(r.map(function(t){return t[0]})),u.domain([0,d3.max(r,function(t){return t[1]})]),s.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+c+")").call(d3.axisBottom(i).tickFormat(function(t){return e(t)}).tickValues(i.domain().filter(n))),s.append("g").attr("class","axis axis--y").call(d3.axisLeft(u).ticks(10)).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy","0.71em").attr("text-anchor","end").text("Gross"),s.selectAll(".bar").data(t.data).enter().append("rect").attr("class","bar").attr("x",function(t){return i(t[0])}).attr("y",function(t){return u(t[1])}).attr("width",5).attr("height",function(t){return c-u(t[1])})});var h=[]}function Access(t,e){function n(){return console.log("isAuthenticated?"),e.then(function(e){return e.$isAuthenticated()?(console.log("Yes"),o.OK):(console.log("No"),t.reject(o.FORBIDDEN))})}function r(n){return e.then(function(e){return e.$hasRole(n)?(console.log("Yes"),o.OK):(console.log("No"),t.reject(o.UNAUTHORIZED))})}var o={OK:200,UNAUTHORIZED:401,FORBIDDEN:403,isAuthenticated:n,hasRole:r};return o}function Auth(t){function e(){return t({method:"GET",url:"/api/user/auth"})}function n(e){return t({method:"POST",url:"/login",data:e})}var r={getProfile:e,login:n};return r}function UserProfile(t){var e={},n=function(){return t.getProfile().then(function(t){for(var r in e)e.hasOwnProperty(r)&&delete e[r];return angular.extend(e,t.data,{$refresh:n,$hasRole:function(t){return e.roles.indexOf(t)>=0},$hasAnyRole:function(t){return!!e.roles.filter(function(e){return t.indexOf(e)>=0}).length},$isAuthenticated:function(){return e.roles.length>0}})})};return n()}httpInterceptor.$inject=["$cookies"],AppController.$inject=["$scope","$cookies","$window","UserProfile"],HomeController.$inject=["$location","$window"],ChartController.$inject=["$scope"],Access.$inject=["$q","UserProfile"],Auth.$inject=["$http"],UserProfile.$inject=["Auth"],angular.module("spring-gulp",["ui.router","ngCookies"]),angular.module("spring-gulp").config(["$stateProvider","$httpProvider","$urlRouterProvider",function(t,e,n){e.interceptors.push("httpInterceptor"),n.otherwise("/"),t.state({name:"home",url:"/",controller:"HomeController",templateUrl:"js/home/home.html",resolve:{Access:["Access",function(t){return t.isAuthenticated()}]}}).state({name:"chart",url:"/chart",controller:"ChartController",templateUrl:"js/chart/chart.html",resolve:{Access:["Access",function(t){return t.isAuthenticated()}]}}).state({name:"admin",url:"/admin",template:"admin",resolve:{Access:["Access",function(t){return t.hasRole("ROLE_ADMIN")}]}})}]),angular.module("spring-gulp").run(["$rootScope","$http","$window","Access","$location",function(t,e,n,r,o){t.$on("$stateChangeStart",function(t){}),t.$on("$stateChangeError",function(t,e,o,a,l,c){console.log(c),console.log(n.location),c==r.UNAUTHORIZED?n.location.href=n.location.pathname+"login.html":c==r.FORBIDDEN&&(n.location.href=n.location.pathname+"login.html")})}]),angular.module("spring-gulp").factory("httpInterceptor",httpInterceptor),angular.module("spring-gulp").controller("AppController",AppController),angular.module("spring-gulp").controller("HomeController",HomeController),angular.module("spring-gulp").controller("ChartController",ChartController),angular.module("spring-gulp").factory("Access",Access),angular.module("spring-gulp").factory("Auth",Auth),angular.module("spring-gulp").factory("UserProfile",UserProfile);